<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3"/>
<title>Lucene.Net: core/Search/Spans/SpanNearQuery.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="lucene-net-icon-128x128.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Lucene.Net
   &#160;<span id="projectnumber">3.0.3</span>
   </div>
   <div id="projectbrief">Lucene.Net is a .NET port of the Java Lucene Indexing Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="Index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_1efe588324fc547683bba4a3f1bac847.html">core</a></li><li class="navelem"><a class="el" href="dir_56f9b3c34a852b92179da152ee78b823.html">Search</a></li><li class="navelem"><a class="el" href="dir_969a26ab3e94e3ca0984802fc6c3fa57.html">Spans</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SpanNearQuery.cs</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_span_near_query_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/* </span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Licensed to the Apache Software Foundation (ASF) under one or more</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> * contributor license agreements.  See the NOTICE file distributed with</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * this work for additional information regarding copyright ownership.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> * The ASF licenses this file to You under the Apache License, Version 2.0</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * (the &quot;License&quot;); you may not use this file except in compliance with</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> * the License.  You may obtain a copy of the License at</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * http://www.apache.org/licenses/LICENSE-2.0</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * </span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * Unless required by applicable law or agreed to in writing, software</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * See the License for the specific language governing permissions and</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * limitations under the License.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="keyword">using</span> System;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">using</span> System.Linq;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="keyword">using</span> Lucene.Net.Index;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="keyword">using</span> Lucene.Net.Support;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="code" href="_span_near_query_8cs.html#a2a6914ea10bbe06764856e29e5674e66">   22</a></span>&#160;<span class="keyword">using</span> <a class="code" href="class_lucene_1_1_net_1_1_index_1_1_index_reader.html" title="IndexReader is an abstract class, providing an interface for accessing an index. Search of an index i...">IndexReader</a> = Lucene.Net.Index.IndexReader;</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="code" href="_span_near_query_8cs.html#aeff40eaf34e2b78f761d305f48b95699">   23</a></span>&#160;<span class="keyword">using</span> <a class="code" href="_boolean_query_8cs.html#aeff40eaf34e2b78f761d305f48b95699">ToStringUtils</a> = Lucene.Net.Util.ToStringUtils;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="code" href="_span_near_query_8cs.html#accbc7c5687907350ba0e2681b41e1b0d">   24</a></span>&#160;<span class="keyword">using</span> <a class="code" href="_more_like_this_8cs.html#accbc7c5687907350ba0e2681b41e1b0d">Query</a> = Lucene.Net.Search.Query;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span>Lucene.Net.Search.Spans</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    [Serializable]</div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html">   34</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">class </span><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html" title="Matches spans which are near one another. One can specify slop, the maximum number of intervening unm...">SpanNearQuery</a> : <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>, System.ICloneable</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        <span class="keyword">protected</span> <span class="keyword">internal</span> System.Collections.Generic.IList&lt;<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>&gt; clauses;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        <span class="keyword">protected</span> <span class="keyword">internal</span> <span class="keywordtype">int</span> internalSlop;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keyword">protected</span> <span class="keyword">internal</span> <span class="keywordtype">bool</span> inOrder;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        </div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        <span class="keyword">protected</span> <span class="keyword">internal</span> System.String internalField;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        <span class="keyword">private</span> readonly <span class="keywordtype">bool</span> collectPayloads;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        </div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a30d78a4dd6b8b2646e24162d48e49825">   48</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="_payload_near_query_8cs.html#a445185cc4be1c020a7789e9c4445f789">SpanNearQuery</a>(<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>[] clauses, <span class="keywordtype">int</span> slop, <span class="keywordtype">bool</span> inOrder):this(clauses, slop, inOrder, true)</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        {</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        </div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a36f4a45603ff01d89d027dbe8619d9cd">   52</a></span>&#160;        <span class="keyword">public</span> <a class="code" href="_payload_near_query_8cs.html#a445185cc4be1c020a7789e9c4445f789">SpanNearQuery</a>(<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>[] clauses, <span class="keywordtype">int</span> slop, <span class="keywordtype">bool</span> inOrder, <span class="keywordtype">bool</span> collectPayloads)</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <span class="comment">// copy clauses array into an ArrayList</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            this.clauses = <span class="keyword">new</span> System.Collections.Generic.List&lt;<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>&gt;(clauses.Length);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; clauses.Length; i++)</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> clause = clauses[i];</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                <span class="keywordflow">if</span> (i == 0)</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;                {</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                    <span class="comment">// check field</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                    internalField = clause.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html#a8231e8b720a9fd985e37cdccb79f1dd5" title="Returns the name of the field matched by this query.">Field</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;                }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!clause.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html#a8231e8b720a9fd985e37cdccb79f1dd5" title="Returns the name of the field matched by this query.">Field</a>.Equals(internalField))</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> System.ArgumentException(<span class="stringliteral">&quot;Clauses must have same field.&quot;</span>);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                }</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                this.clauses.Add(clause);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            }</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            this.collectPayloads = collectPayloads;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            this.internalSlop = slop;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            this.inOrder = inOrder;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        }</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        </div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#aa0df01027efd1045dc5e6ec4baef509e">   77</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>[] GetClauses()</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="comment">// Return a copy</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <span class="keywordflow">return</span> clauses.ToArray();</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        }</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">int</span> Slop</div>
<div class="line"><a name="l00085"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#af729cefadc5339d9b9afb8589a3865b1">   85</a></span>&#160;        {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> internalSlop; }</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">bool</span> IsInOrder</div>
<div class="line"><a name="l00091"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a19f380a2c3f16cc31f960160893e73ae">   91</a></span>&#160;        {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> inOrder; }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code" href="_syns2_index_8cs.html#a6d7b175c6799cf1d18e9493727d23fc6">Field</a></div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#ab085e34de44595986ecadef887658f89">   96</a></span>&#160;        {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;            <span class="keyword">get</span> { <span class="keywordflow">return</span> internalField; }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        }</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a903c8b2aaf55f4c7fb38398cc9e605ba">  100</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span>  ExtractTerms(System.Collections.Generic.ISet&lt;<a class="code" href="class_lucene_1_1_net_1_1_index_1_1_term.html" title="A Term represents a word from text. This is the unit of search. It is composed of two elements...">Term</a>&gt; terms)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> clause <span class="keywordflow">in</span> clauses)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                clause.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a9f47bf807320ce75a9096c983ab358d7" title="Expert: adds all terms occuring in this query to the terms set. Only works if this query is in its re...">ExtractTerms</a>(terms);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a67f77d8bf6727f4e8dcc149931fc8a2c">  108</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> System.String ToString(System.String field)</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            System.Text.StringBuilder buffer = <span class="keyword">new</span> System.Text.StringBuilder();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            buffer.Append(<span class="stringliteral">&quot;spanNear([&quot;</span>);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            System.Collections.Generic.IEnumerator&lt;<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>&gt; i = clauses.GetEnumerator();</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">while</span> (i.MoveNext())</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> clause = i.Current;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                buffer.Append(clause.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a5c948f4230c7d9d1acf3dc38551137d5" title="Prints a query to a string, with field assumed to be the default field and omitted. The representation used is one that is supposed to be readable by QueryParser. However, there are the following limitations: If the query was created by the parser, the printed representation may not be exactly what was parsed. For example, characters that need to be escaped will be represented without the required backslash. Some of the more complicated queries (e.g. span queries) don&#39;t have a representation that can be parsed by QueryParser. ">ToString</a>(field));</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                buffer.Append(<span class="stringliteral">&quot;, &quot;</span>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordflow">if</span> (clauses.Count &gt; 0) buffer.Length -= 2;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            buffer.Append(<span class="stringliteral">&quot;], &quot;</span>);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            buffer.Append(internalSlop);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            buffer.Append(<span class="stringliteral">&quot;, &quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            buffer.Append(inOrder);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            buffer.Append(<span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            buffer.Append(<a class="code" href="_boolean_query_8cs.html#aeff40eaf34e2b78f761d305f48b95699">ToStringUtils</a>.Boost(Boost));</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            <span class="keywordflow">return</span> buffer.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a5c948f4230c7d9d1acf3dc38551137d5" title="Prints a query to a string, with field assumed to be the default field and omitted. The representation used is one that is supposed to be readable by QueryParser. However, there are the following limitations: If the query was created by the parser, the printed representation may not be exactly what was parsed. For example, characters that need to be escaped will be represented without the required backslash. Some of the more complicated queries (e.g. span queries) don&#39;t have a representation that can be parsed by QueryParser. ">ToString</a>();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        </div>
<div class="line"><a name="l00129"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a0defb19018dd81bbc00a4a254d8bf48a">  129</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_spans.html" title="Expert: an enumeration of span matches. Used to implement span searching. Each span represents a rang...">Spans</a> GetSpans(<a class="code" href="class_lucene_1_1_net_1_1_index_1_1_index_reader.html" title="IndexReader is an abstract class, providing an interface for accessing an index. Search of an index i...">IndexReader</a> reader)</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span> (clauses.Count == 0)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;            <span class="comment">// optimize 0-clause case</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="_payload_span_util_8cs.html#a338dea77645d7a36c786d0eaf9615b75">SpanOrQuery</a>(GetClauses()).GetSpans(reader);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="keywordflow">if</span> (clauses.Count == 1)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="comment">// optimize 1-clause case</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <span class="keywordflow">return</span> clauses[0].GetSpans(reader);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="keywordflow">return</span> inOrder?(<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_spans.html" title="Expert: an enumeration of span matches. Used to implement span searching. Each span represents a rang...">Spans</a>) <span class="keyword">new</span> <a class="code" href="_payload_near_query_8cs.html#a244010aa5ec5d41d0d0ecd3ce3064479">NearSpansOrdered</a>(<span class="keyword">this</span>, reader, collectPayloads):(<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_spans.html" title="Expert: an enumeration of span matches. Used to implement span searching. Each span represents a rang...">Spans</a>) <span class="keyword">new</span> <a class="code" href="_payload_near_query_8cs.html#a125ae27c7508532a4cb2c48e1a17739b">NearSpansUnordered</a>(<span class="keyword">this</span>, reader);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        }</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        </div>
<div class="line"><a name="l00142"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a06c953e9ab5a5f00dd242dda1187f93a">  142</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html" title="The abstract base class for queries. Instantiable subclasses are: TermQuery  MultiTermQuery  BooleanQ...">Query</a> Rewrite(<a class="code" href="class_lucene_1_1_net_1_1_index_1_1_index_reader.html" title="IndexReader is an abstract class, providing an interface for accessing an index. Search of an index i...">IndexReader</a> reader)</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html" title="Matches spans which are near one another. One can specify slop, the maximum number of intervening unm...">SpanNearQuery</a> clone = null;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; clauses.Count; i++)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> c = clauses[i];</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> query = (<a class="code" href="_abstract_field_8cs.html#acc785bedc86fa99fa13c32eaf059baab">SpanQuery</a>) c.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a0d78f3423d340cf4ddbeb2db9e13d055" title="Expert: called to re-write queries into primitive queries. For example, a PrefixQuery will be rewritt...">Rewrite</a>(reader);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                <span class="keywordflow">if</span> (query != c)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    <span class="comment">// clause rewrote: must clone</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    <span class="keywordflow">if</span> (clone == null)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                        clone = (<a class="code" href="_payload_near_query_8cs.html#a445185cc4be1c020a7789e9c4445f789">SpanNearQuery</a>) this.Clone();</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                    clone.clauses[i] = query;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="keywordflow">if</span> (clone != null)</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            {</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                <span class="keywordflow">return</span> clone; <span class="comment">// some clauses rewrote</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            }</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">this</span>; <span class="comment">// no clauses rewrote</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            }</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        }</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        </div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a88711213c9c1a68208626ea418e2d5bc">  167</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> System.Object Clone()</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordtype">int</span> sz = clauses.Count;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>[] newClauses = <span class="keyword">new</span> <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>[sz];</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sz; i++)</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> clause = clauses[i];</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                newClauses[i] = (<a class="code" href="_abstract_field_8cs.html#acc785bedc86fa99fa13c32eaf059baab">SpanQuery</a>) clause.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#aa06acccee0ba99acb9f6fea24dff856d" title="Returns a clone of this query. ">Clone</a>();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html" title="Matches spans which are near one another. One can specify slop, the maximum number of intervening unm...">SpanNearQuery</a> spanNearQuery = <span class="keyword">new</span> <a class="code" href="_payload_near_query_8cs.html#a445185cc4be1c020a7789e9c4445f789">SpanNearQuery</a>(newClauses, internalSlop, inOrder);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            spanNearQuery.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a2a58b600e864bed65cc21815fffa0218" title="Gets or sets the boost for this query clause to b. Documents matching this clause will (in addition t...">Boost</a> = Boost;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <span class="keywordflow">return</span> spanNearQuery;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        }</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        </div>
<div class="line"><a name="l00183"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a8c80e64e0431d2e88d927eceda81f60d">  183</a></span>&#160;        <span class="keyword">public</span>  <span class="keyword">override</span> <span class="keywordtype">bool</span> Equals(System.Object o)</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">if</span> (<span class="keyword">this</span> == o)</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">if</span> (!(o is <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html" title="Matches spans which are near one another. One can specify slop, the maximum number of intervening unm...">SpanNearQuery</a>))</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            </div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            SpanNearQuery spanNearQuery = (<a class="code" href="_payload_near_query_8cs.html#a445185cc4be1c020a7789e9c4445f789">SpanNearQuery</a>) o;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span> (inOrder != spanNearQuery.inOrder)</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;            <span class="keywordflow">if</span> (internalSlop != spanNearQuery.internalSlop)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            <span class="keywordflow">if</span> (clauses.Count != spanNearQuery.clauses.Count)</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            System.Collections.IEnumerator iter1 = clauses.GetEnumerator();</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            System.Collections.IEnumerator iter2 = spanNearQuery.clauses.GetEnumerator();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">while</span> (iter1.MoveNext() &amp;&amp; iter2.MoveNext())</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> item1 = (<a class="code" href="_abstract_field_8cs.html#acc785bedc86fa99fa13c32eaf059baab">SpanQuery</a>)iter1.Current;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> item2 = (<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a>)iter2.Current;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                <span class="keywordflow">if</span> (!item1.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a99c7950ea92f8a234e46f94616170d4c">Equals</a>(item2))</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;            }</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="keywordflow">return</span> Boost == spanNearQuery.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a2a58b600e864bed65cc21815fffa0218" title="Gets or sets the boost for this query clause to b. Documents matching this clause will (in addition t...">Boost</a>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        </div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_near_query.html#a3142a6f46d4f6f612e00850eaeb76523">  211</a></span>&#160;        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> GetHashCode()</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordtype">long</span> result = 0;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">//mgarski .NET uses the arraylist&#39;s location, not contents to calculate the hash</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="comment">// need to start with result being the hash of the contents.</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">foreach</span> (<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_spans_1_1_span_query.html" title="Base class for span-based queries. ">SpanQuery</a> sq <span class="keywordflow">in</span> clauses)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                result += sq.<a class="code" href="class_lucene_1_1_net_1_1_search_1_1_query.html#a4a1966528d60f0f34294a4b1458dab1c">GetHashCode</a>();</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;            }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="comment">// Mix bits before folding in things like boost, since it could cancel the</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="comment">// last element of clauses.  This particular mix also serves to</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            <span class="comment">// differentiate SpanNearQuery hashcodes from others.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            result ^= ((result &lt;&lt; 14) | (<a class="code" href="class_lucene_1_1_net_1_1_support_1_1_number.html" title="A simple class for number conversions. ">Number</a>.<a class="code" href="class_lucene_1_1_net_1_1_support_1_1_number.html#aafe44e2acf7feacad6abd2a425730644" title="Performs an unsigned bitwise right shift with the specified number ">URShift</a>(result, 19))); <span class="comment">// reversible</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            result += System.Convert.ToInt32(Boost);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            result += internalSlop;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            result ^= (inOrder ? (long) 0x99AFD3BD : 0);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) result;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        }</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 3 2013 02:12:46 for Lucene.Net by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3
</small></address>
</body>
</html>
